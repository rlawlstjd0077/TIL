# 2021-03-12

# 느낀점

- 규모에 압도당하지 않는 것이 매우 중요한 것 같다. 작게 시도할 수 있는 동력을 가질 수 있도록 작게작게 시도를 하는게 굉장히 중요할 것 같다. 

# 공부한 것

## 암호화

### 암호화란?

- 일반적으로 통신 채널은 안전하지 않다.
- 그래서 메시지가 유출되더라도 그 내용을 알 수 없도록 하는 것이 암호화이다.

### 복호화란?

- 암호화된 메시지를 읽을 수 있도록 다시 평문으로 변환하는 것을 복호화라고 부른다.
- 그런데 복호과를 할 수 없는 암호화가 존재하는데 가장 대표적인 예가 bcrypt 이다.
  - 사용자의 비밀번호 같은 경우는 이러한 암호화로 데이터베이스에 저장할 때 주로 쓰인다.

### 해시 함수

- 해시 함수는 정해지지 않은 길이의 문자열을 입력받아 `고정된` 크기의 결과값을 출력하는 함수로, 주로 전자 서명에 많이 사용된다.
- 해시 함수는 일방향 함수여야 한다.
  - 메시지 m을 알면 h(m)을 구하기는 쉽지만, h(m)을 만족하는 x를 찾는 것은 구할 수 없어야 한다.

충돌 저항성 (collision resistance)

- 충돌이란 두개의 서로 다른 입력 m1와 m2가 있을 떄 h(m1) = h(m2)가 되는 상황을 말한다.
  - 해시 함수의 입력은 무한하기 때문에 충돌은 수없이 만들 수 있다.
  - 그렇기에 해시 함수에 완벽한 충돌 회피란 없다.
- 충돌 저항성이라는 조건은 충돌이 발생할 가능성은 있지만 충돌 쌍은 찾을 수 없어야 한다는 의미다.

역상 저항성

- 해시 함수의 결과를 이미 알고 있다. 그때 이 결과를 만드는 입력값 m을 찾는 것이 얼마나 어려운지를 나타낸다.
- 6 → 123?

제 2 역상 저항성

- 입력값 m을 이미 알고 있는 상태에서 h(m) = x 을 만족하는 x를 얼마나 찾기 쉬운지를 나타낸다.
- 312?
- 암호화는 평문을 암호로 만드는 것이다.
- 복호화는 암호를 평문으로 만드는 것이다.
- 
- 이때 암호화에 쓰이는 방법이 주로 Hash 알고리즘이 쓰인다.
  - Hash는 어떤 데이터는 일정한 길이 (n-bit)의 데이터로 바꿔준다.

## Access Token

- 단일 JWT Token을 사용하면 크게 두가지 문제점이 생길 수 있다.
  1. 유효기간이 긴 경우, 한 번 탈취당한 토큰은 해커가 긴 시간동안 악용할 수 있음
  2. 유효기간이 짧은 경우, 토큰이 만료될 때마다 사용자는 다시 로그인을 해야 됨

### Refresh Token

- Access Token 재발행을 위한 인증 토큰
- 최초 로그인 시에 서버는 Refresh Token, Access Token을 모두 클라이언트에게 발급해준다.
  - 서버는 Access Token은 DB에 저장하지 않으며, Refresh Token은 DB에 저장한다.
  - 클라이언트 역시 안전한 곳에 Refresh Token을 저장하고 통신에는 Access Token을 사용한다.
- Access Token 유효기간이 만료 되었다는 응답을 서버로부터 받은 클라이언트는 Refresh Token을 꺼내서 같이 재전송 하고, 서버는 DB에 있는 Refresh Token과 과 대조하여 재발행 여부를 결정한다.
  - Refresh Token도 만료된 경우에는 재로그인을 해야 한다.
- (참고) 보통 유효기간은 Access Token 1시간, Refresh Token 2주 정도로 잡는다고 한다.